{"version":3,"file":"watch.js","sourceRoot":"","sources":["../../src/decorator/watch.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAe,UAAU,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AACjF,OAAO,EAAE,aAAa,EAAE,MAAM,QAAQ,CAAC;AAEiB,CAAC;AAEzD,MAAM,qBAAsB,SAAQ,iBAAkC;IAClE;QACI,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,wBAAwB,CAAC,CAAC;IACvD,CAAC;IAEM,QAAQ,CAAC,QAAyB,EAAE,MAAW,EAAE,GAAY;QAChE,IAAI,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,kBAAkB,EAAE,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QAC7E,IAAI,cAAc,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACnD,cAAc,CAAC,GAAG,EAAE,CAAC;QACrB,IAAI,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEpC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;QACzB,OAAO,CAAC,cAAc,CAAC,kBAAkB,EAAE,IAAI,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;IACzE,CAAC;CACJ;AAED,MAAM,CAAC,MAAM,KAAK,GAAG,MAAM,CAAC,SAAS,CAAmC,IAAI,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC","sourcesContent":["import { AbstractDecorator, IDecoration, MirrorType, Mirror } from '@zuu/mirror';\nimport { camelToDashes } from './util';\n\nexport interface WatchParameters extends IDecoration { };\n\nexport class WatchDecorator extends AbstractDecorator<WatchParameters> {\n    constructor() {\n        super(MirrorType.METHOD, \"hyena.decorators.watch\");\n    }\n\n    public annotate(instance: WatchParameters, target: any, key?: string) {\n        let keys = Reflect.getMetadata(\"hyena:properties\", target.constructor) || [];\n        let nameComponents = camelToDashes(key).split(\"-\");\n        nameComponents.pop();\n        let name = nameComponents.join(\"-\");\n        \n        keys.push({ name, key });\n        Reflect.defineMetadata(\"hyena:properties\", keys, target.constructor);\n    }\n}\n\nexport const Watch = Mirror.decorator<WatchParameters, MethodDecorator>(new WatchDecorator)({});"]}